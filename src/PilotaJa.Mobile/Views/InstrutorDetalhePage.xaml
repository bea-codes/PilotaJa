<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:PilotaJa.Mobile.ViewModels"
             x:Class="PilotaJa.Mobile.Views.InstrutorDetalhePage"
             x:DataType="vm:InstrutorDetalheViewModel"
             Title="{Binding Title}"
             BackgroundColor="{StaticResource Background}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            
            <!-- Avatar e Info Principal -->
            <Frame BackgroundColor="{StaticResource Surface}" CornerRadius="16" Padding="24">
                <VerticalStackLayout Spacing="12" HorizontalOptions="Center">
                    <Frame WidthRequest="100" HeightRequest="100" CornerRadius="50" BackgroundColor="#E5E7EB" Padding="0">
                        <Label Text="ðŸ‘¤" FontSize="40" VerticalOptions="Center" HorizontalOptions="Center"/>
                    </Frame>
                    <Label Text="{Binding Instrutor.Nome}" FontSize="24" FontAttributes="Bold" HorizontalOptions="Center"/>
                    <Label HorizontalOptions="Center" TextColor="{StaticResource TextSecondary}">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="ðŸ“ "/>
                                <Span Text="{Binding Instrutor.Cidade}"/>
                                <Span Text=", "/>
                                <Span Text="{Binding Instrutor.Estado}"/>
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>
                    
                    <!-- Stats -->
                    <HorizontalStackLayout Spacing="32" HorizontalOptions="Center" Margin="0,12,0,0">
                        <VerticalStackLayout HorizontalOptions="Center">
                            <Label FontSize="20" FontAttributes="Bold" HorizontalOptions="Center">
                                <Label.FormattedText>
                                    <FormattedString>
                                        <Span Text="â­ "/>
                                        <Span Text="{Binding Instrutor.Avaliacao, StringFormat='{0:F1}'}"/>
                                    </FormattedString>
                                </Label.FormattedText>
                            </Label>
                            <Label Text="AvaliaÃ§Ã£o" FontSize="12" TextColor="{StaticResource TextSecondary}" HorizontalOptions="Center"/>
                        </VerticalStackLayout>
                        <VerticalStackLayout HorizontalOptions="Center">
                            <Label Text="{Binding Instrutor.TotalAulas}" FontSize="20" FontAttributes="Bold" HorizontalOptions="Center"/>
                            <Label Text="Aulas" FontSize="12" TextColor="{StaticResource TextSecondary}" HorizontalOptions="Center"/>
                        </VerticalStackLayout>
                        <VerticalStackLayout HorizontalOptions="Center">
                            <Label FontSize="20" FontAttributes="Bold" TextColor="{StaticResource Primary}" HorizontalOptions="Center">
                                <Label.FormattedText>
                                    <FormattedString>
                                        <Span Text="R$ "/>
                                        <Span Text="{Binding Instrutor.PrecoHora, StringFormat='{0:F2}'}"/>
                                    </FormattedString>
                                </Label.FormattedText>
                            </Label>
                            <Label Text="por hora" FontSize="12" TextColor="{StaticResource TextSecondary}" HorizontalOptions="Center"/>
                        </VerticalStackLayout>
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Bio -->
            <Frame BackgroundColor="{StaticResource Surface}" CornerRadius="12" Padding="16" IsVisible="{Binding Instrutor.Bio, Converter={StaticResource IsNotNullConverter}}">
                <VerticalStackLayout Spacing="8">
                    <Label Text="Sobre" FontAttributes="Bold" FontSize="16"/>
                    <Label Text="{Binding Instrutor.Bio}" TextColor="{StaticResource TextSecondary}"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Agendar -->
            <Frame BackgroundColor="{StaticResource Surface}" CornerRadius="12" Padding="16">
                <VerticalStackLayout Spacing="16">
                    <Label Text="Agendar Aula" FontAttributes="Bold" FontSize="16"/>
                    
                    <VerticalStackLayout Spacing="4">
                        <Label Text="Data" FontSize="14"/>
                        <DatePicker Date="{Binding DataSelecionada}" MinimumDate="{x:Static sys:DateTime.Today}" xmlns:sys="clr-namespace:System;assembly=netstandard"/>
                    </VerticalStackLayout>
                    
                    <VerticalStackLayout Spacing="4">
                        <Label Text="HorÃ¡rio" FontSize="14"/>
                        <TimePicker Time="{Binding HoraSelecionada}"/>
                    </VerticalStackLayout>
                    
                    <Button Text="ðŸ“… Agendar Aula"
                            Style="{StaticResource PrimaryButton}"
                            Command="{Binding AgendarAulaCommand}"/>
                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
